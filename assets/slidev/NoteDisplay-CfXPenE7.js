import{d as M,y as H,r as P,D as B,p as T,_ as I,f as _,o as y,n as h,g as D,t as E}from"../modules/vue-BVsPWxP6.js";import{C as N,b as j}from"../index-C9YXCyu5.js";const d="slidev-note-fade",l="slidev-note-click-mark",K=M({__name:"NoteDisplay",props:{class:{type:String,required:!1},noteHtml:{type:String,required:!1},note:{type:String,required:!1},placeholder:{type:String,required:!1},clicksContext:{type:Object,required:!1},autoScroll:{type:Boolean,required:!1}},emits:["markerDblclick","markerClick"],setup(g,{expose:C,emit:c}){C();const o=g,f=c,k=H(()=>{var r,n;return((r=o.clicksContext)==null?void 0:r.current)!=null&&((n=o.noteHtml)==null?void 0:n.includes("slidev-note-click-mark"))}),a=P(null);function v(){var w;if(!a.value||!k.value)return;const r=Array.from(a.value.querySelectorAll(`.${l}`)),n=+(((w=o.clicksContext)==null?void 0:w.current)??N),i=n<0||n>=N,S=new Set;function L(e){!e||e===a.value||(S.add(e),e.parentElement&&L(e.parentElement))}const b=new Map;for(const e of r){const t=e.parentElement,s=Number(e.dataset.clicks);b.set(s,e),L(t),Array.from(t.childNodes).forEach(p=>{if(p.nodeType===3){const A=document.createElement("span");A.textContent=p.textContent,t.insertBefore(A,p),p.remove()}})}const q=Array.from(a.value.querySelectorAll("*"));let u=0;const m=new Map;for(const e of q)m.has(u)||m.set(u,[]),m.get(u).push(e),e.classList.contains(l)&&(u=Number(e.dataset.clicks)||u+1);for(const[e,t]of m)i?t.forEach(s=>s.classList.remove(d)):t.forEach(s=>s.classList.toggle(d,S.has(s)?!1:e!==n));for(const[e,t]of b)t.classList.remove(d),t.classList.toggle(`${l}-past`,i?!1:e<n),t.classList.toggle(`${l}-active`,i?!1:e===n),t.classList.toggle(`${l}-next`,i?!1:e===n+1),t.classList.toggle(`${l}-future`,i?!1:e>n+1),t.ondblclick=s=>{f("markerDblclick",s,e),!s.defaultPrevented&&(o.clicksContext.current=e,s.stopPropagation(),s.stopImmediatePropagation())},t.onclick=s=>{f("markerClick",s,e)},o.autoScroll&&e===n&&t.scrollIntoView({block:"center",behavior:"smooth"})}B(()=>{var r;return[o.noteHtml,(r=o.clicksContext)==null?void 0:r.current]},()=>{T(()=>{v()})},{immediate:!0}),I(()=>{v()});const x={props:o,emit:f,withClicks:k,noteDisplay:a,CLASS_FADE:d,CLASS_MARKER:l,highlightNote:v};return Object.defineProperty(x,"__isScriptSetup",{enumerable:!1,value:!0}),x}}),O=["innerHTML"],R=["textContent"],V=["textContent"];function z(g,C,c,o,f,k){return c.noteHtml?(y(),_("div",{key:0,ref:"noteDisplay",class:h(["prose overflow-auto outline-none slidev-note",[o.props.class,o.withClicks?"slidev-note-with-clicks":""]]),innerHTML:c.noteHtml},null,10,O)):c.note?(y(),_("div",{key:1,class:h(["prose overflow-auto outline-none slidev-note",o.props.class])},[D("p",{textContent:E(c.note)},null,8,R)],2)):(y(),_("div",{key:2,class:h(["prose overflow-auto outline-none opacity-50 italic select-none slidev-note",o.props.class])},[D("p",{textContent:E(o.props.placeholder||"No notes.")},null,8,V)],2))}const G=j(K,[["render",z],["__file","/home/runner/work/slidev-myPresentation/slidev-myPresentation/node_modules/@slidev/client/internals/NoteDisplay.vue"]]);export{G as N};
